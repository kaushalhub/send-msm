"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var querystring = require("querystring");

var msgpath = { host: "rest.nexmo.com", path: "/sms/json" };
var shortcodePath = { host: "rest.nexmo.com", path: "/sc/us/${type}/json" };
var ttsEndpoint = { host: "api.nexmo.com", path: "/tts/json" };
var ttsPromptEndpoint = { host: "api.nexmo.com", path: "/tts-prompt/json" };
var callEndpoint = { host: "rest.nexmo.com", path: "/call/json" };
var verifyEndpoint = { host: "api.nexmo.com", path: "/verify/json" };
var checkVerifyEndpoint = { host: "api.nexmo.com", path: "/verify/check/json" };
var controlVerifyEndpoint = {
  host: "api.nexmo.com",
  path: "/verify/control/json"
};
var searchVerifyEndpoint = {
  host: "api.nexmo.com",
  path: "/verify/search/json"
};
var niEndpoint = { host: "api.nexmo.com", path: "/ni/advanced/async/json" };
var niBasicEndpoint = { host: "api.nexmo.com", path: "/ni/basic/json" };
var niStandardEndpoint = { host: "api.nexmo.com", path: "/ni/standard/json" };
var niAdvancedEndpoint = { host: "api.nexmo.com", path: "/ni/advanced/json" };
var up = {};
var numberPattern = new RegExp("^[0-9 +()-]*$");

var _options = null;

// Error message resources are maintained globally in one place for easy management
var ERROR_MESSAGES = {
  sender: "Invalid from address",
  to: "Invalid to address",
  msg: "Invalid Text Message",
  msgParams: "Invalid shortcode message parameters",
  countrycode: "Invalid Country Code",
  msisdn: "Invalid MSISDN passed",
  body: "Invalid Body value in Binary Message",
  udh: "Invalid udh value in Binary Message",
  title: "Invalid title in WAP Push message",
  url: "Invalid url in WAP Push message",
  maxDigits: "Invalid max digits for TTS prompt",
  byeText: "Invalid bye text for TTS prompt",
  pinCode: "Invalid pin code for TTS confirm",
  failedText: "Invalid failed text for TTS confirm",
  answerUrl: "Invalid answer URL for call",
  verifyValidation: "Missing Mandatory fields (number and/or brand)",
  checkVerifyValidation: "Missing Mandatory fields (request_id and/or code)",
  controlVerifyValidation: "Missing Mandatory fields (request_id and/or cmd-command)",
  searchVerifyValidation: "Missing Mandatory fields (request_id or request_ids)",
  numberInsightAdvancedValidation: "Missing Mandatory fields (number and/or callback url)",
  numberInsightValidation: "Missing Mandatory field - number",
  numberInsightPatternFailure: "Number can contain digits and may include any or all of the following: white space, -,+, (, ).",
  optionsNotAnObject: "Options parameter should be a dictionary. Check the docs for valid properties for options",
  product: "Invalid product. Should be one of [voice, sms]"
};

exports.initialize = function (pkey, psecret, options) {
  // These can default to empty as we may provide a private key for JWT auth
  // In that situation, private key and secret are not required. If you don't provide
  // A key/secret and try and make a request you'll get a 401 error back
  pkey = pkey || "";
  psecret = psecret || "";

  up = {
    api_key: pkey,
    api_secret: psecret
  };
  _options = options;
};

exports.sendBinaryMessage = function (sender, recipient, body, udh, callback) {
  if (!body) {
    sendError(callback, new Error(ERROR_MESSAGES.body));
  } else if (!udh) {
    sendError(callback, new Error(ERROR_MESSAGES.udh));
  } else {
    sendMessage({
      from: sender,
      to: recipient,
      type: "binary",
      body: body,
      udh: udh
    }, callback);
  }
};

exports.sendWapPushMessage = function (sender, recipient, title, url, validity, callback) {
  if (!title) {
    sendError(callback, new Error(ERROR_MESSAGES.title));
  } else if (!url) {
    sendError(callback, new Error(ERROR_MESSAGES.url));
  } else {
    if (typeof validity === "function") {
      callback = validity;
      validity = 86400000;
    }
    sendMessage({
      from: sender,
      to: recipient,
      type: "wappush",
      title: title,
      validity: validity,
      url: url
    }, callback);
  }
};

exports.sendTextMessage = function (sender, recipient, message, opts, callback) {
  if (!message) {
    sendError(callback, new Error(ERROR_MESSAGES.msg));
  } else {
    if (!callback) {
      callback = opts;
      opts = {};
    }
    opts["from"] = sender;
    opts["to"] = recipient;
    opts["text"] = message;
    sendMessage(opts, callback);
  }
};

exports.sendMessage = function (opts, callback) {
  sendMessage(opts, callback);
};
function sendMessage(data, callback) {
  if (!data.from) {
    sendError(callback, new Error(ERROR_MESSAGES.sender));
  } else if (!data.to) {
    sendError(callback, new Error(ERROR_MESSAGES.to));
  } else {
    var path = clone(msgpath);
    path.path += "?" + querystring.stringify(data);
    _options.logger.info("sending message from " + data.from + " to " + data.to + " with message " + data.text);
    sendRequest(path, "POST", function (err, apiResponse) {
      if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {
        sendError(callback, new Error(apiResponse.messages[0]["error-text"]), apiResponse);
      } else {
        if (callback) callback(err, apiResponse);
      }
    });
  }
}

function sendViaShortcode(type, recipient, messageParams, opts, callback) {
  if (!recipient) {
    sendError(callback, new Error(ERROR_MESSAGES.to));
  }
  if (!messageParams || !Object.keys(messageParams)) {
    sendError(callback, new Error(ERROR_MESSAGES.msgParams));
  }
  opts = opts || {};
  var path = clone(shortcodePath);
  path.path = path.path.replace("${type}", type);
  Object.keys(messageParams).forEach(function (key) {
    opts[key] = messageParams[key];
  });
  opts.to = recipient;
  path.path += "?" + querystring.stringify(opts);
  _options.logger.info("sending message from shortcode " + type + " to " + recipient + " with parameters " + JSON.stringify(messageParams));
  sendRequest(path, "POST", function (err, apiResponse) {
    if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {
      sendError(callback, new Error(apiResponse.messages[0]["error-text"]), apiResponse);
    } else {
      if (callback) callback(err, apiResponse);
    }
  });
}
exports.shortcodeAlert = function (recipient, messageParams, opts, callback) {
  sendViaShortcode("alert", recipient, messageParams, opts, callback);
};
exports.shortcode2FA = function (recipient, messageParams, opts, callback) {
  sendViaShortcode("2fa", recipient, messageParams, opts, callback);
};
exports.shortcodeMarketing = function (recipient, messageParams, opts, callback) {
  sendViaShortcode("marketing", recipient, messageParams, opts, callback);
};

function clone(a) {
  return JSON.parse(JSON.stringify(a));
}

function getEndpoint(action) {
  return { path: action };
}

function sendRequest(endpoint, method, callback) {
  endpoint.path = endpoint.path + (endpoint.path.indexOf("?") > 0 ? "&" : "?") + querystring.stringify(up);
  _options.httpClient.request(endpoint, method, callback);
}

exports.checkBalance = function (callback) {
  var balanceEndpoint = getEndpoint("/account/get-balance");
  sendRequest(balanceEndpoint, callback);
};

exports.getPricing = function (countryCode, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else {
    var pricingEndpoint = getEndpoint("/account/get-pricing/outbound");
    pricingEndpoint.path += "?country=" + countryCode;
    sendRequest(pricingEndpoint, callback);
  }
};

exports.getPhonePricing = function (product, msisdn, callback) {
  if (!product || product != "sms" && product != "voice") {
    sendError(callback, new Error(ERROR_MESSAGES.product));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var pricingEndpoint = getEndpoint("/account/get-phone-pricing/outbound");
    pricingEndpoint.path += "/" + product + "/" + up.api_key + "/" + up.api_secret + "/" + msisdn;
    sendRequest(pricingEndpoint, callback);
  }
};

exports.getNumbers = function (options, callback) {
  var numbersEndpoint = getEndpoint("/account/numbers");
  if (typeof options === "function") {
    callback = options;
  } else if ((typeof options === "undefined" ? "undefined" : _typeof(options)) === "object") {
    numbersEndpoint.path = numbersEndpoint.path + "?";
    for (var key in options) {
      numbersEndpoint.path = numbersEndpoint.path + key + "=" + options[key] + "&";
    }
  } else {
    sendError(callback, new Error(ERROR_MESSAGES.optionsNotAnObject));
    return;
  }
  sendRequest(numbersEndpoint, callback);
};

exports.searchNumbers = function (countryCode, pattern, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else {
    var searchEndpoint = getEndpoint("/number/search");
    searchEndpoint.path += "?country=" + countryCode;
    if (typeof pattern === "function") {
      callback = pattern;
    } else if ((typeof pattern === "undefined" ? "undefined" : _typeof(pattern)) === "object") {
      searchEndpoint.path = searchEndpoint.path + "&";
      for (var arg in pattern) {
        searchEndpoint.path = searchEndpoint.path + arg + "=" + pattern[arg] + "&";
      }
    } else {
      searchEndpoint.path = searchEndpoint.path + "&pattern=" + pattern;
    }
    sendRequest(searchEndpoint, callback);
  }
};

exports.buyNumber = function (countryCode, msisdn, callback) {
  if (!countryCode || countryCode.length != 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var buyEndpoint = getEndpoint("/number/buy");
    buyEndpoint.path += "?country=" + countryCode + "&msisdn=" + msisdn;
    sendRequest(buyEndpoint, "POST", callback);
  }
};

exports.cancelNumber = function (countryCode, msisdn, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var cancelEndpoint = getEndpoint("/number/cancel");
    cancelEndpoint.path += "?country=" + countryCode + "&msisdn=" + msisdn;
    sendRequest(cancelEndpoint, "POST", callback);
  }
};

exports.cancelNumber = function (countryCode, msisdn, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var cancelEndpoint = getEndpoint("/number/cancel");
    cancelEndpoint.path += "?country=" + countryCode + "&msisdn=" + msisdn;
    sendRequest(cancelEndpoint, "POST", callback);
  }
};

exports.updateNumber = function (countryCode, msisdn, params, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var updateEndpoint = getEndpoint("/number/update");
    updateEndpoint.path += "?country=" + countryCode + "&msisdn=" + msisdn;
    updateEndpoint.path = updateEndpoint.path + "&";
    for (var arg in params) {
      updateEndpoint.path = updateEndpoint.path + arg + "=" + encodeURIComponent(params[arg]) + "&";
    }
    sendRequest(updateEndpoint, "POST", callback);
  }
};

exports.changePassword = function (newSecret, callback) {
  var settingsEndpoint = getEndpoint("/account/settings");
  settingsEndpoint.path += "?newSecret=" + encodeURIComponent(newSecret);
  sendRequest(settingsEndpoint, "POST", callback);
};

exports.changeMoCallbackUrl = function (newUrl, callback) {
  var settingsEndpoint = getEndpoint("/account/settings");
  settingsEndpoint.path += "?moCallBackUrl=" + encodeURIComponent(newUrl);
  sendRequest(settingsEndpoint, "POST", callback);
};

exports.changeDrCallbackUrl = function (newUrl, callback) {
  var settingsEndpoint = getEndpoint("/account/settings");
  settingsEndpoint.path += "?drCallBackUrl=" + encodeURIComponent(newUrl);
  sendRequest(settingsEndpoint, "POST", callback);
};

exports.verifyNumber = function (inputParams, callback) {
  if (!inputParams.number || !inputParams.brand) {
    sendError(callback, new Error(ERROR_MESSAGES.verifyValidation));
  } else {
    var vEndpoint = clone(verifyEndpoint);
    vEndpoint.path += "?" + querystring.stringify(inputParams);
    sendRequest(vEndpoint, callback);
  }
};

exports.checkVerifyRequest = function (inputParams, callback) {
  if (!inputParams.request_id || !inputParams.code) {
    sendError(callback, new Error(ERROR_MESSAGES.checkVerifyValidation));
  } else {
    var vEndpoint = clone(checkVerifyEndpoint);
    vEndpoint.path += "?" + querystring.stringify(inputParams);
    sendRequest(vEndpoint, callback);
  }
};

exports.controlVerifyRequest = function (inputParams, callback) {
  if (!inputParams.request_id || !inputParams.cmd) {
    sendError(callback, new Error(ERROR_MESSAGES.controlVerifyValidation));
  } else {
    var vEndpoint = clone(controlVerifyEndpoint);
    vEndpoint.path += "?" + querystring.stringify(inputParams);
    sendRequest(vEndpoint, callback);
  }
};

exports.searchVerifyRequest = function (requestIds, callback) {
  var requestIdParam = {};
  if (!requestIds) {
    sendError(callback, new Error(ERROR_MESSAGES.searchVerifyValidation));
  } else {
    if (Array.isArray(requestIds)) {
      if (requestIds.length === 1) {
        requestIdParam.request_id = requestIds;
      } else {
        requestIdParam.request_ids = requestIds;
      }
    } else {
      requestIdParam.request_id = requestIds;
    }
    var vEndpoint = clone(searchVerifyEndpoint);
    vEndpoint.path += "?" + querystring.stringify(requestIdParam);
    sendRequest(vEndpoint, callback);
  }
};

exports.numberInsight = function (inputParams, callback) {
  numberInsightAsync(inputParams, callback);
};

exports.numberInsightBasic = function (inputParams, callback) {
  numberInsightCommon(niBasicEndpoint, inputParams, callback);
};

exports.numberInsightStandard = function (inputParams, callback) {
  numberInsightCommon(niStandardEndpoint, inputParams, callback);
};

exports.numberInsightAdvanced = function (inputParams, callback) {
  numberInsightCommon(niAdvancedEndpoint, inputParams, callback);
};

exports.numberInsightAdvancedAsync = function (inputParams, callback) {
  numberInsightAsync(inputParams, callback);
};

function numberInsightAsync(inputParams, callback) {
  if (!inputParams.number || !inputParams.callback) {
    sendError(callback, new Error(ERROR_MESSAGES.numberInsightAdvancedValidation));
  } else {
    var nEndpoint = clone(niEndpoint);
    nEndpoint.path += "?" + querystring.stringify(inputParams);
    sendRequest(nEndpoint, callback);
  }
}

function numberInsightCommon(endpoint, inputParams, callback) {
  if (validateNumber(inputParams, callback)) {
    var inputObj;
    if ((typeof inputParams === "undefined" ? "undefined" : _typeof(inputParams)) !== "object") {
      inputObj = { number: inputParams };
    } else {
      inputObj = inputParams;
    }
    var nEndpoint = clone(endpoint);
    nEndpoint.path += "?" + querystring.stringify(inputObj);
    sendRequest(nEndpoint, callback);
  }
}
function validateNumber(inputParams, callback) {
  if ((typeof inputParams === "undefined" ? "undefined" : _typeof(inputParams)) === "object" && !inputParams.number) {
    sendError(callback, new Error(ERROR_MESSAGES.numberInsightValidation));
    return false;
  } else if ((typeof inputParams === "undefined" ? "undefined" : _typeof(inputParams)) === "object" && !numberPattern.test(inputParams.number)) {
    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));
    return false;
  } else if ((typeof inputParams === "undefined" ? "undefined" : _typeof(inputParams)) !== "object" && (!inputParams || !numberPattern.test(inputParams))) {
    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));
    return false;
  }
  return true;
}

function sendVoiceMessage(voiceEndpoint, data, callback) {
  if (!data.to) {
    sendError(callback, new Error(ERROR_MESSAGES.to));
  } else {
    var endpoint = clone(voiceEndpoint);
    endpoint.path += "?" + querystring.stringify(data);
    _options.logger.info("sending TTS message to " + data.to + " with message " + data.text);
    sendRequest(endpoint, "POST", function (err, apiResponse) {
      if (!err && apiResponse.status && apiResponse.status > 0) {
        sendError(callback, new Error(apiResponse["error-text"]), apiResponse);
      } else {
        if (callback) callback(err, apiResponse);
      }
    });
  }
}

exports.sendTTSMessage = function (recipient, message, opts, callback) {
  if (!message) {
    sendError(callback, new Error(ERROR_MESSAGES.msg));
  } else {
    if (!opts) {
      opts = {};
    }
    opts["to"] = recipient;
    opts["text"] = message;
    sendVoiceMessage(ttsEndpoint, opts, callback);
  }
};

exports.sendTTSPromptWithCapture = function (recipient, message, maxDigits, byeText, opts, callback) {
  if (!message) {
    sendError(callback, new Error(ERROR_MESSAGES.msg));
  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {
    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));
  } else if (!byeText) {
    sendError(callback, new Error(ERROR_MESSAGES.byeText));
  } else {
    if (!opts) {
      opts = {};
    }
    opts["to"] = recipient;
    opts["text"] = message;
    opts["max_digits"] = maxDigits;
    opts["bye_text"] = byeText;
    sendVoiceMessage(ttsPromptEndpoint, opts, callback);
  }
};

exports.sendTTSPromptWithConfirm = function (recipient, message, maxDigits, pinCode, byeText, failedText, opts, callback) {
  if (!message) {
    sendError(callback, new Error(ERROR_MESSAGES.msg));
  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {
    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));
  } else if (!pinCode || pinCode.length !== maxDigits) {
    sendError(callback, new Error(ERROR_MESSAGES.pinCode));
  } else if (!byeText) {
    sendError(callback, new Error(ERROR_MESSAGES.byeText));
  } else if (!failedText) {
    sendError(callback, new Error(ERROR_MESSAGES.failedText));
  } else {
    if (!opts) {
      opts = {};
    }
    opts["to"] = recipient;
    opts["text"] = message;
    opts["max_digits"] = maxDigits;
    opts["pin_code"] = pinCode;
    opts["bye_text"] = byeText;
    opts["failed_text"] = failedText;
    sendVoiceMessage(ttsPromptEndpoint, opts, callback);
  }
};

exports.call = function (recipient, answerUrl, opts, callback) {
  if (!answerUrl) {
    sendError(callback, new Error(ERROR_MESSAGES.answerUrl));
  } else {
    if (!opts) {
      opts = {};
    }
    opts["to"] = recipient;
    opts["answer_url"] = answerUrl;
    sendVoiceMessage(callEndpoint, opts, callback);
  }
};

function sendError(callback, err, returnData) {
  // Throw the error in case if there is no callback passed
  if (callback) {
    callback(err, returnData);
  } else {
    throw err;
  }
}

exports.getWithQuery = function (path, query, creds, opts, callback) {
  if (!query) {
    throw new Error('"query" is a required parameter');
  }

  var pathExt = "";
  if (typeof query === "string") {
    // single call Id
    pathExt = "/" + query;
  } else if ((typeof query === "undefined" ? "undefined" : _typeof(query)) === "object" && Object.keys(query).length > 0) {
    // filter
    pathExt = "?" + querystring.stringify(query);
  }

  var config = {
    host: "api.nexmo.com",
    path: "" + path + pathExt,
    method: "GET",
    headers: {
      "Content-Type": "application/json",
      Authorization: "Bearer " + creds.generateJwt()
    }
  };
  opts.httpClient.request(config, callback);
};

exports.setHost = function (aHost) {
  msgpath.host = aHost;
  shortcodePath.host = aHost;
  ttsEndpoint.host = aHost;
  ttsPromptEndpoint.host = aHost;
  callEndpoint.host = aHost;
  verifyEndpoint.host = aHost;
  checkVerifyEndpoint.host = aHost;
  controlVerifyEndpoint.host = aHost;
  searchVerifyEndpoint.host = aHost;
  niEndpoint.host = aHost;
  niBasicEndpoint.host = aHost;
  niStandardEndpoint.host = aHost;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJxdWVyeXN0cmluZyIsInJlcXVpcmUiLCJtc2dwYXRoIiwiaG9zdCIsInBhdGgiLCJzaG9ydGNvZGVQYXRoIiwidHRzRW5kcG9pbnQiLCJ0dHNQcm9tcHRFbmRwb2ludCIsImNhbGxFbmRwb2ludCIsInZlcmlmeUVuZHBvaW50IiwiY2hlY2tWZXJpZnlFbmRwb2ludCIsImNvbnRyb2xWZXJpZnlFbmRwb2ludCIsInNlYXJjaFZlcmlmeUVuZHBvaW50IiwibmlFbmRwb2ludCIsIm5pQmFzaWNFbmRwb2ludCIsIm5pU3RhbmRhcmRFbmRwb2ludCIsIm5pQWR2YW5jZWRFbmRwb2ludCIsInVwIiwibnVtYmVyUGF0dGVybiIsIlJlZ0V4cCIsIl9vcHRpb25zIiwiRVJST1JfTUVTU0FHRVMiLCJzZW5kZXIiLCJ0byIsIm1zZyIsIm1zZ1BhcmFtcyIsImNvdW50cnljb2RlIiwibXNpc2RuIiwiYm9keSIsInVkaCIsInRpdGxlIiwidXJsIiwibWF4RGlnaXRzIiwiYnllVGV4dCIsInBpbkNvZGUiLCJmYWlsZWRUZXh0IiwiYW5zd2VyVXJsIiwidmVyaWZ5VmFsaWRhdGlvbiIsImNoZWNrVmVyaWZ5VmFsaWRhdGlvbiIsImNvbnRyb2xWZXJpZnlWYWxpZGF0aW9uIiwic2VhcmNoVmVyaWZ5VmFsaWRhdGlvbiIsIm51bWJlckluc2lnaHRBZHZhbmNlZFZhbGlkYXRpb24iLCJudW1iZXJJbnNpZ2h0VmFsaWRhdGlvbiIsIm51bWJlckluc2lnaHRQYXR0ZXJuRmFpbHVyZSIsIm9wdGlvbnNOb3RBbk9iamVjdCIsInByb2R1Y3QiLCJleHBvcnRzIiwiaW5pdGlhbGl6ZSIsInBrZXkiLCJwc2VjcmV0Iiwib3B0aW9ucyIsImFwaV9rZXkiLCJhcGlfc2VjcmV0Iiwic2VuZEJpbmFyeU1lc3NhZ2UiLCJyZWNpcGllbnQiLCJjYWxsYmFjayIsInNlbmRFcnJvciIsIkVycm9yIiwic2VuZE1lc3NhZ2UiLCJmcm9tIiwidHlwZSIsInNlbmRXYXBQdXNoTWVzc2FnZSIsInZhbGlkaXR5Iiwic2VuZFRleHRNZXNzYWdlIiwibWVzc2FnZSIsIm9wdHMiLCJkYXRhIiwiY2xvbmUiLCJzdHJpbmdpZnkiLCJsb2dnZXIiLCJpbmZvIiwidGV4dCIsInNlbmRSZXF1ZXN0IiwiZXJyIiwiYXBpUmVzcG9uc2UiLCJzdGF0dXMiLCJtZXNzYWdlcyIsInNlbmRWaWFTaG9ydGNvZGUiLCJtZXNzYWdlUGFyYW1zIiwiT2JqZWN0Iiwia2V5cyIsInJlcGxhY2UiLCJmb3JFYWNoIiwia2V5IiwiSlNPTiIsInNob3J0Y29kZUFsZXJ0Iiwic2hvcnRjb2RlMkZBIiwic2hvcnRjb2RlTWFya2V0aW5nIiwiYSIsInBhcnNlIiwiZ2V0RW5kcG9pbnQiLCJhY3Rpb24iLCJlbmRwb2ludCIsIm1ldGhvZCIsImluZGV4T2YiLCJodHRwQ2xpZW50IiwicmVxdWVzdCIsImNoZWNrQmFsYW5jZSIsImJhbGFuY2VFbmRwb2ludCIsImdldFByaWNpbmciLCJjb3VudHJ5Q29kZSIsImxlbmd0aCIsInByaWNpbmdFbmRwb2ludCIsImdldFBob25lUHJpY2luZyIsImdldE51bWJlcnMiLCJudW1iZXJzRW5kcG9pbnQiLCJzZWFyY2hOdW1iZXJzIiwicGF0dGVybiIsInNlYXJjaEVuZHBvaW50IiwiYXJnIiwiYnV5TnVtYmVyIiwiYnV5RW5kcG9pbnQiLCJjYW5jZWxOdW1iZXIiLCJjYW5jZWxFbmRwb2ludCIsInVwZGF0ZU51bWJlciIsInBhcmFtcyIsInVwZGF0ZUVuZHBvaW50IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY2hhbmdlUGFzc3dvcmQiLCJuZXdTZWNyZXQiLCJzZXR0aW5nc0VuZHBvaW50IiwiY2hhbmdlTW9DYWxsYmFja1VybCIsIm5ld1VybCIsImNoYW5nZURyQ2FsbGJhY2tVcmwiLCJ2ZXJpZnlOdW1iZXIiLCJpbnB1dFBhcmFtcyIsIm51bWJlciIsImJyYW5kIiwidkVuZHBvaW50IiwiY2hlY2tWZXJpZnlSZXF1ZXN0IiwicmVxdWVzdF9pZCIsImNvZGUiLCJjb250cm9sVmVyaWZ5UmVxdWVzdCIsImNtZCIsInNlYXJjaFZlcmlmeVJlcXVlc3QiLCJyZXF1ZXN0SWRzIiwicmVxdWVzdElkUGFyYW0iLCJBcnJheSIsImlzQXJyYXkiLCJyZXF1ZXN0X2lkcyIsIm51bWJlckluc2lnaHQiLCJudW1iZXJJbnNpZ2h0QXN5bmMiLCJudW1iZXJJbnNpZ2h0QmFzaWMiLCJudW1iZXJJbnNpZ2h0Q29tbW9uIiwibnVtYmVySW5zaWdodFN0YW5kYXJkIiwibnVtYmVySW5zaWdodEFkdmFuY2VkIiwibnVtYmVySW5zaWdodEFkdmFuY2VkQXN5bmMiLCJuRW5kcG9pbnQiLCJ2YWxpZGF0ZU51bWJlciIsImlucHV0T2JqIiwidGVzdCIsInNlbmRWb2ljZU1lc3NhZ2UiLCJ2b2ljZUVuZHBvaW50Iiwic2VuZFRUU01lc3NhZ2UiLCJzZW5kVFRTUHJvbXB0V2l0aENhcHR1cmUiLCJpc05hTiIsInNlbmRUVFNQcm9tcHRXaXRoQ29uZmlybSIsImNhbGwiLCJyZXR1cm5EYXRhIiwiZ2V0V2l0aFF1ZXJ5IiwicXVlcnkiLCJjcmVkcyIsInBhdGhFeHQiLCJjb25maWciLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImdlbmVyYXRlSnd0Iiwic2V0SG9zdCIsImFIb3N0Il0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQUVBLElBQUlBLGNBQWNDLFFBQVEsYUFBUixDQUFsQjs7QUFFQSxJQUFJQyxVQUFVLEVBQUVDLE1BQU0sZ0JBQVIsRUFBMEJDLE1BQU0sV0FBaEMsRUFBZDtBQUNBLElBQUlDLGdCQUFnQixFQUFFRixNQUFNLGdCQUFSLEVBQTBCQyxNQUFNLHFCQUFoQyxFQUFwQjtBQUNBLElBQUlFLGNBQWMsRUFBRUgsTUFBTSxlQUFSLEVBQXlCQyxNQUFNLFdBQS9CLEVBQWxCO0FBQ0EsSUFBSUcsb0JBQW9CLEVBQUVKLE1BQU0sZUFBUixFQUF5QkMsTUFBTSxrQkFBL0IsRUFBeEI7QUFDQSxJQUFJSSxlQUFlLEVBQUVMLE1BQU0sZ0JBQVIsRUFBMEJDLE1BQU0sWUFBaEMsRUFB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TUFBeEIsRUFBZ0M1RyxRQUFoQztBQUNELENBeEJEOztBQTBCQVQsUUFBUXlILE9BQVIsR0FBa0IsVUFBU0MsS0FBVCxFQUFnQjtBQUNoQ3RLLFVBQVFDLElBQVIsR0FBZXFLLEtBQWY7QUFDQW5LLGdCQUFjRixJQUFkLEdBQXFCcUssS0FBckI7QUFDQWxLLGNBQVlILElBQVosR0FBbUJxSyxLQUFuQjtBQUNBakssb0JBQWtCSixJQUFsQixHQUF5QnFLLEtBQXpCO0FBQ0FoSyxlQUFhTCxJQUFiLEdBQW9CcUssS0FBcEI7QUFDQS9KLGlCQUFlTixJQUFmLEdBQXNCcUssS0FBdEI7QUFDQTlKLHNCQUFvQlAsSUFBcEIsR0FBMkJxSyxLQUEzQjtBQUNBN0osd0JBQXNCUixJQUF0QixHQUE2QnFLLEtBQTdCO0FBQ0E1Six1QkFBcUJULElBQXJCLEdBQTRCcUssS0FBNUI7QUFDQTNKLGFBQVdWLElBQVgsR0FBa0JxSyxLQUFsQjtBQUNBMUosa0JBQWdCWCxJQUFoQixHQUF1QnFLLEtBQXZCO0FBQ0F6SixxQkFBbUJaLElBQW5CLEdBQTBCcUssS0FBMUI7QUFDRCxDQWJEIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBxdWVyeXN0cmluZyA9IHJlcXVpcmUoXCJxdWVyeXN0cmluZ1wiKTtcblxudmFyIG1zZ3BhdGggPSB7IGhvc3Q6IFwicmVzdC5uZXhtby5jb21cIiwgcGF0aDogXCIvc21zL2pzb25cIiB9O1xudmFyIHNob3J0Y29kZVBhdGggPSB7IGhvc3Q6IFwicmVzdC5uZXhtby5jb21cIiwgcGF0aDogXCIvc2MvdXMvJHt0eXBlfS9qc29uXCIgfTtcbnZhciB0dHNFbmRwb2ludCA9IHsgaG9zdDogXCJhcGkubmV4bW8uY29tXCIsIHBhdGg6IFwiL3R0cy9qc29uXCIgfTtcbnZhciB0dHNQcm9tcHRFbmRwb2ludCA9IHsgaG9zdDogXCJhcGkubmV4bW8uY29tXCIsIHBhdGg6IFwiL3R0cy1wcm9tcHQvanNvblwiIH07XG52YXIgY2FsbEVuZHBvaW50ID0geyBob3N0OiBcInJlc3QubmV4bW8uY29tXCIsIHBhdGg6IFwiL2NhbGwvanNvblwiIH07XG52YXIgdmVyaWZ5RW5kcG9pbnQgPSB7IGhvc3Q6IFwiYXBpLm5leG1vLmNvbVwiLCBwYXRoOiBcIi92ZXJpZnkvanNvblwiIH07XG52YXIgY2hlY2tWZXJpZnlFbmRwb2ludCA9IHsgaG9zdDogXCJhcGkubmV4bW8uY29tXCIsIHBhdGg6IFwiL3ZlcmlmeS9jaGVjay9qc29uXCIgfTtcbnZhciBjb250cm9sVmVyaWZ5RW5kcG9pbnQgPSB7XG4gIGhvc3Q6IFwiYXBpLm5leG1vLmNvbVwiLFxuICBwYXRoOiBcIi92ZXJpZnkvY29udHJvbC9qc29uXCJcbn07XG52YXIgc2VhcmNoVmVyaWZ5RW5kcG9pbnQgPSB7XG4gIGhvc3Q6IFwiYXBpLm5leG1vLmNvbVwiLFxuICBwYXRoOiBcIi92ZXJpZnkvc2VhcmNoL2pzb25cIlxufTtcbnZhciBuaUVuZHBvaW50ID0geyBob3N0OiBcImFwaS5uZXhtby5jb21cIiwgcGF0aDogXCIvbmkvYWR2YW5jZWQvYXN5bmMvanNvblwiIH07XG52YXIgbmlCYXNpY0VuZHBvaW50ID0geyBob3N0OiBcImFwaS5uZXhtby5jb21cIiwgcGF0aDogXCIvbmkvYmFzaWMvanNvblwiIH07XG52YXIgbmlTdGFuZGFyZEVuZHBvaW50ID0geyBob3N0OiBcImFwaS5uZXhtby5jb21cIiwgcGF0aDogXCIvbmkvc3RhbmRhcmQvanNvblwiIH07XG52YXIgbmlBZHZhbmNlZEVuZHBvaW50ID0geyBob3N0OiBcImFwaS5uZXhtby5jb21cIiwgcGF0aDogXCIvbmkvYWR2YW5jZWQvanNvblwiIH07XG52YXIgdXAgPSB7fTtcbnZhciBudW1iZXJQYXR0ZXJuID0gbmV3IFJlZ0V4cChcIl5bMC05ICsoKS1dKiRcIik7XG5cbnZhciBfb3B0aW9ucyA9IG51bGw7XG5cbi8vIEVycm9yIG1lc3NhZ2UgcmVzb3VyY2VzIGFyZSBtYWludGFpbmVkIGdsb2JhbGx5IGluIG9uZSBwbGFjZSBmb3IgZWFzeSBtYW5hZ2VtZW50XG52YXIgRVJST1JfTUVTU0FHRVMgPSB7XG4gIHNlbmRlcjogXCJJbnZhbGlkIGZyb20gYWRkcmVzc1wiLFxuICB0bzogXCJJbnZhbGlkIHRvIGFkZHJlc3NcIixcbiAgbXNnOiBcIkludmFsaWQgVGV4dCBNZXNzYWdlXCIsXG4gIG1zZ1BhcmFtczogXCJJbnZhbGlkIHNob3J0Y29kZSBtZXNzYWdlIHBhcmFtZXRlcnNcIixcbiAgY291bnRyeWNvZGU6IFwiSW52YWxpZCBDb3VudHJ5IENvZGVcIixcbiAgbXNpc2RuOiBcIkludmFsaWQgTVNJU0ROIHBhc3NlZFwiLFxuICBib2R5OiBcIkludmFsaWQgQm9keSB2YWx1ZSBpbiBCaW5hcnkgTWVzc2FnZVwiLFxuICB1ZGg6IFwiSW52YWxpZCB1ZGggdmFsdWUgaW4gQmluYXJ5IE1lc3NhZ2VcIixcbiAgdGl0bGU6IFwiSW52YWxpZCB0aXRsZSBpbiBXQVAgUHVzaCBtZXNzYWdlXCIsXG4gIHVybDogXCJJbnZhbGlkIHVybCBpbiBXQVAgUHVzaCBtZXNzYWdlXCIsXG4gIG1heERpZ2l0czogXCJJbnZhbGlkIG1heCBkaWdpdHMgZm9yIFRUUyBwcm9tcHRcIixcbiAgYnllVGV4dDogXCJJbnZhbGlkIGJ5ZSB0ZXh0IGZvciBUVFMgcHJvbXB0XCIsXG4gIHBpbkNvZGU6IFwiSW52YWxpZCBwaW4gY29kZSBmb3IgVFRTIGNvbmZpcm1cIixcbiAgZmFpbGVkVGV4dDogXCJJbnZhbGlkIGZhaWxlZCB0ZXh0IGZvciBUVFMgY29uZmlybVwiLFxuICBhbnN3ZXJVcmw6IFwiSW52YWxpZCBhbnN3ZXIgVVJMIGZvciBjYWxsXCIsXG4gIHZlcmlmeVZhbGlkYXRpb246IFwiTWlzc2luZyBNYW5kYXRvcnkgZmllbGRzIChudW1iZXIgYW5kL29yIGJyYW5kKVwiLFxuICBjaGVja1ZlcmlmeVZhbGlkYXRpb246IFwiTWlzc2luZyBNYW5kYXRvcnkgZmllbGRzIChyZXF1ZXN0X2lkIGFuZC9vciBjb2RlKVwiLFxuICBjb250cm9sVmVyaWZ5VmFsaWRhdGlvbjpcbiAgICBcIk1pc3NpbmcgTWFuZGF0b3J5IGZpZWxkcyAocmVxdWVzdF9pZCBhbmQvb3IgY21kLWNvbW1hbmQpXCIsXG4gIHNlYXJjaFZlcmlmeVZhbGlkYXRpb246XG4gICAgXCJNaXNzaW5nIE1hbmRhdG9yeSBmaWVsZHMgKHJlcXVlc3RfaWQgb3IgcmVxdWVzdF9pZHMpXCIsXG4gIG51bWJlckluc2lnaHRBZHZhbmNlZFZhbGlkYXRpb246XG4gICAgXCJNaXNzaW5nIE1hbmRhdG9yeSBmaWVsZHMgKG51bWJlciBhbmQvb3IgY2FsbGJhY2sgdXJsKVwiLFxuICBudW1iZXJJbnNpZ2h0VmFsaWRhdGlvbjogXCJNaXNzaW5nIE1hbmRhdG9yeSBmaWVsZCAtIG51bWJlclwiLFxuICBudW1iZXJJbnNpZ2h0UGF0dGVybkZhaWx1cmU6XG4gICAgXCJOdW1iZXIgY2FuIGNvbnRhaW4gZGlnaXRzIGFuZCBtYXkgaW5jbHVkZSBhbnkgb3IgYWxsIG9mIHRoZSBmb2xsb3dpbmc6IHdoaXRlIHNwYWNlLCAtLCssICgsICkuXCIsXG4gIG9wdGlvbnNOb3RBbk9iamVjdDpcbiAgICBcIk9wdGlvbnMgcGFyYW1ldGVyIHNob3VsZCBiZSBhIGRpY3Rpb25hcnkuIENoZWNrIHRoZSBkb2NzIGZvciB2YWxpZCBwcm9wZXJ0aWVzIGZvciBvcHRpb25zXCIsXG4gIHByb2R1Y3Q6IFwiSW52YWxpZCBwcm9kdWN0LiBTaG91bGQgYmUgb25lIG9mIFt2b2ljZSwgc21zXVwiXG59O1xuXG5leHBvcnRzLmluaXRpYWxpemUgPSBmdW5jdGlvbihwa2V5LCBwc2VjcmV0LCBvcHRpb25zKSB7XG4gIC8vIFRoZXNlIGNhbiBkZWZhdWx0IHRvIGVtcHR5IGFzIHdlIG1heSBwcm92aWRlIGEgcHJpdmF0ZSBrZXkgZm9yIEpXVCBhdXRoXG4gIC8vIEluIHRoYXQgc2l0dWF0aW9uLCBwcml2YXRlIGtleSBhbmQgc2VjcmV0IGFyZSBub3QgcmVxdWlyZWQuIElmIHlvdSBkb24ndCBwcm92aWRlXG4gIC8vIEEga2V5L3NlY3JldCBhbmQgdHJ5IGFuZCBtYWtlIGEgcmVxdWVzdCB5b3UnbGwgZ2V0IGEgNDAxIGVycm9yIGJhY2tcbiAgcGtleSA9IHBrZXkgfHwgXCJcIjtcbiAgcHNlY3JldCA9IHBzZWNyZXQgfHwgXCJcIjtcblxuICB1cCA9IHtcbiAgICBhcGlfa2V5OiBwa2V5LFxuICAgIGFwaV9zZWNyZXQ6IHBzZWNyZXRcbiAgfTtcbiAgX29wdGlvbnMgPSBvcHRpb25zO1xufTtcblxuZXhwb3J0cy5zZW5kQmluYXJ5TWVzc2FnZSA9IGZ1bmN0aW9uKHNlbmRlciwgcmVjaXBpZW50LCBib2R5LCB1ZGgsIGNhbGxiYWNrKSB7XG4gIGlmICghYm9keSkge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmJvZHkpKTtcbiAgfSBlbHNlIGlmICghdWRoKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudWRoKSk7XG4gIH0gZWxzZSB7XG4gICAgc2VuZE1lc3NhZ2UoXG4gICAgICB7XG4gICAgICAgIGZyb206IHNlbmRlcixcbiAgICAgICAgdG86IHJlY2lwaWVudCxcbiAgICAgICAgdHlwZTogXCJiaW5hcnlcIixcbiAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgdWRoOiB1ZGhcbiAgICAgIH0sXG4gICAgICBjYWxsYmFja1xuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydHMuc2VuZFdhcFB1c2hNZXNzYWdlID0gZnVuY3Rpb24oXG4gIHNlbmRlcixcbiAgcmVjaXBpZW50LFxuICB0aXRsZSxcbiAgdXJsLFxuICB2YWxpZGl0eSxcbiAgY2FsbGJhY2tcbikge1xuICBpZiAoIXRpdGxlKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudGl0bGUpKTtcbiAgfSBlbHNlIGlmICghdXJsKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudXJsKSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiB2YWxpZGl0eSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjYWxsYmFjayA9IHZhbGlkaXR5O1xuICAgICAgdmFsaWRpdHkgPSA4NjQwMDAwMDtcbiAgICB9XG4gICAgc2VuZE1lc3NhZ2UoXG4gICAgICB7XG4gICAgICAgIGZyb206IHNlbmRlcixcbiAgICAgICAgdG86IHJlY2lwaWVudCxcbiAgICAgICAgdHlwZTogXCJ3YXBwdXNoXCIsXG4gICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgdmFsaWRpdHk6IHZhbGlkaXR5LFxuICAgICAgICB1cmw6IHVybFxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrXG4gICAgKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZW5kVGV4dE1lc3NhZ2UgPSBmdW5jdGlvbihzZW5kZXIsIHJlY2lwaWVudCwgbWVzc2FnZSwgb3B0cywgY2FsbGJhY2spIHtcbiAgaWYgKCFtZXNzYWdlKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNnKSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2sgPSBvcHRzO1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cbiAgICBvcHRzW1wiZnJvbVwiXSA9IHNlbmRlcjtcbiAgICBvcHRzW1widG9cIl0gPSByZWNpcGllbnQ7XG4gICAgb3B0c1tcInRleHRcIl0gPSBtZXNzYWdlO1xuICAgIHNlbmRNZXNzYWdlKG9wdHMsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uKG9wdHMsIGNhbGxiYWNrKSB7XG4gIHNlbmRNZXNzYWdlKG9wdHMsIGNhbGxiYWNrKTtcbn07XG5mdW5jdGlvbiBzZW5kTWVzc2FnZShkYXRhLCBjYWxsYmFjaykge1xuICBpZiAoIWRhdGEuZnJvbSkge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLnNlbmRlcikpO1xuICB9IGVsc2UgaWYgKCFkYXRhLnRvKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudG8pKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGF0aCA9IGNsb25lKG1zZ3BhdGgpO1xuICAgIHBhdGgucGF0aCArPSBcIj9cIiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShkYXRhKTtcbiAgICBfb3B0aW9ucy5sb2dnZXIuaW5mbyhcbiAgICAgIFwic2VuZGluZyBtZXNzYWdlIGZyb20gXCIgK1xuICAgICAgICBkYXRhLmZyb20gK1xuICAgICAgICBcIiB0byBcIiArXG4gICAgICAgIGRhdGEudG8gK1xuICAgICAgICBcIiB3aXRoIG1lc3NhZ2UgXCIgK1xuICAgICAgICBkYXRhLnRleHRcbiAgICApO1xuICAgIHNlbmRSZXF1ZXN0KHBhdGgsIFwiUE9TVFwiLCBmdW5jdGlvbihlcnIsIGFwaVJlc3BvbnNlKSB7XG4gICAgICBpZiAoIWVyciAmJiBhcGlSZXNwb25zZS5zdGF0dXMgJiYgYXBpUmVzcG9uc2UubWVzc2FnZXNbMF0uc3RhdHVzID4gMCkge1xuICAgICAgICBzZW5kRXJyb3IoXG4gICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgbmV3IEVycm9yKGFwaVJlc3BvbnNlLm1lc3NhZ2VzWzBdW1wiZXJyb3ItdGV4dFwiXSksXG4gICAgICAgICAgYXBpUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBhcGlSZXNwb25zZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2VuZFZpYVNob3J0Y29kZSh0eXBlLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKSB7XG4gIGlmICghcmVjaXBpZW50KSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudG8pKTtcbiAgfVxuICBpZiAoIW1lc3NhZ2VQYXJhbXMgfHwgIU9iamVjdC5rZXlzKG1lc3NhZ2VQYXJhbXMpKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNnUGFyYW1zKSk7XG4gIH1cbiAgb3B0cyA9IG9wdHMgfHwge307XG4gIHZhciBwYXRoID0gY2xvbmUoc2hvcnRjb2RlUGF0aCk7XG4gIHBhdGgucGF0aCA9IHBhdGgucGF0aC5yZXBsYWNlKFwiJHt0eXBlfVwiLCB0eXBlKTtcbiAgT2JqZWN0LmtleXMobWVzc2FnZVBhcmFtcykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBvcHRzW2tleV0gPSBtZXNzYWdlUGFyYW1zW2tleV07XG4gIH0pO1xuICBvcHRzLnRvID0gcmVjaXBpZW50O1xuICBwYXRoLnBhdGggKz0gXCI/XCIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkob3B0cyk7XG4gIF9vcHRpb25zLmxvZ2dlci5pbmZvKFxuICAgIFwic2VuZGluZyBtZXNzYWdlIGZyb20gc2hvcnRjb2RlIFwiICtcbiAgICAgIHR5cGUgK1xuICAgICAgXCIgdG8gXCIgK1xuICAgICAgcmVjaXBpZW50ICtcbiAgICAgIFwiIHdpdGggcGFyYW1ldGVycyBcIiArXG4gICAgICBKU09OLnN0cmluZ2lmeShtZXNzYWdlUGFyYW1zKVxuICApO1xuICBzZW5kUmVxdWVzdChwYXRoLCBcIlBPU1RcIiwgZnVuY3Rpb24oZXJyLCBhcGlSZXNwb25zZSkge1xuICAgIGlmICghZXJyICYmIGFwaVJlc3BvbnNlLnN0YXR1cyAmJiBhcGlSZXNwb25zZS5tZXNzYWdlc1swXS5zdGF0dXMgPiAwKSB7XG4gICAgICBzZW5kRXJyb3IoXG4gICAgICAgIGNhbGxiYWNrLFxuICAgICAgICBuZXcgRXJyb3IoYXBpUmVzcG9uc2UubWVzc2FnZXNbMF1bXCJlcnJvci10ZXh0XCJdKSxcbiAgICAgICAgYXBpUmVzcG9uc2VcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBhcGlSZXNwb25zZSk7XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydHMuc2hvcnRjb2RlQWxlcnQgPSBmdW5jdGlvbihyZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKSB7XG4gIHNlbmRWaWFTaG9ydGNvZGUoXCJhbGVydFwiLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKTtcbn07XG5leHBvcnRzLnNob3J0Y29kZTJGQSA9IGZ1bmN0aW9uKHJlY2lwaWVudCwgbWVzc2FnZVBhcmFtcywgb3B0cywgY2FsbGJhY2spIHtcbiAgc2VuZFZpYVNob3J0Y29kZShcIjJmYVwiLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKTtcbn07XG5leHBvcnRzLnNob3J0Y29kZU1hcmtldGluZyA9IGZ1bmN0aW9uKFxuICByZWNpcGllbnQsXG4gIG1lc3NhZ2VQYXJhbXMsXG4gIG9wdHMsXG4gIGNhbGxiYWNrXG4pIHtcbiAgc2VuZFZpYVNob3J0Y29kZShcIm1hcmtldGluZ1wiLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKTtcbn07XG5cbmZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYSkpO1xufVxuXG5mdW5jdGlvbiBnZXRFbmRwb2ludChhY3Rpb24pIHtcbiAgcmV0dXJuIHsgcGF0aDogYWN0aW9uIH07XG59XG5cbmZ1bmN0aW9uIHNlbmRSZXF1ZXN0KGVuZHBvaW50LCBtZXRob2QsIGNhbGxiYWNrKSB7XG4gIGVuZHBvaW50LnBhdGggPVxuICAgIGVuZHBvaW50LnBhdGggK1xuICAgIChlbmRwb2ludC5wYXRoLmluZGV4T2YoXCI/XCIpID4gMCA/IFwiJlwiIDogXCI/XCIpICtcbiAgICBxdWVyeXN0cmluZy5zdHJpbmdpZnkodXApO1xuICBfb3B0aW9ucy5odHRwQ2xpZW50LnJlcXVlc3QoZW5kcG9pbnQsIG1ldGhvZCwgY2FsbGJhY2spO1xufVxuXG5leHBvcnRzLmNoZWNrQmFsYW5jZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciBiYWxhbmNlRW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9hY2NvdW50L2dldC1iYWxhbmNlXCIpO1xuICBzZW5kUmVxdWVzdChiYWxhbmNlRW5kcG9pbnQsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydHMuZ2V0UHJpY2luZyA9IGZ1bmN0aW9uKGNvdW50cnlDb2RlLCBjYWxsYmFjaykge1xuICBpZiAoIWNvdW50cnlDb2RlIHx8IGNvdW50cnlDb2RlLmxlbmd0aCAhPT0gMikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmNvdW50cnljb2RlKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHByaWNpbmdFbmRwb2ludCA9IGdldEVuZHBvaW50KFwiL2FjY291bnQvZ2V0LXByaWNpbmcvb3V0Ym91bmRcIik7XG4gICAgcHJpY2luZ0VuZHBvaW50LnBhdGggKz0gXCI/Y291bnRyeT1cIiArIGNvdW50cnlDb2RlO1xuICAgIHNlbmRSZXF1ZXN0KHByaWNpbmdFbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmdldFBob25lUHJpY2luZyA9IGZ1bmN0aW9uKHByb2R1Y3QsIG1zaXNkbiwgY2FsbGJhY2spIHtcbiAgaWYgKCFwcm9kdWN0IHx8IChwcm9kdWN0ICE9IFwic21zXCIgJiYgcHJvZHVjdCAhPSBcInZvaWNlXCIpKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMucHJvZHVjdCkpO1xuICB9IGVsc2UgaWYgKCFtc2lzZG4pIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tc2lzZG4pKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcHJpY2luZ0VuZHBvaW50ID0gZ2V0RW5kcG9pbnQoXCIvYWNjb3VudC9nZXQtcGhvbmUtcHJpY2luZy9vdXRib3VuZFwiKTtcbiAgICBwcmljaW5nRW5kcG9pbnQucGF0aCArPVxuICAgICAgXCIvXCIgKyBwcm9kdWN0ICsgXCIvXCIgKyB1cC5hcGlfa2V5ICsgXCIvXCIgKyB1cC5hcGlfc2VjcmV0ICsgXCIvXCIgKyBtc2lzZG47XG4gICAgc2VuZFJlcXVlc3QocHJpY2luZ0VuZHBvaW50LCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0TnVtYmVycyA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHZhciBudW1iZXJzRW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9hY2NvdW50L251bWJlcnNcIik7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XG4gICAgbnVtYmVyc0VuZHBvaW50LnBhdGggPSBudW1iZXJzRW5kcG9pbnQucGF0aCArIFwiP1wiO1xuICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgICBudW1iZXJzRW5kcG9pbnQucGF0aCA9XG4gICAgICAgIG51bWJlcnNFbmRwb2ludC5wYXRoICsga2V5ICsgXCI9XCIgKyBvcHRpb25zW2tleV0gKyBcIiZcIjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMub3B0aW9uc05vdEFuT2JqZWN0KSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNlbmRSZXF1ZXN0KG51bWJlcnNFbmRwb2ludCwgY2FsbGJhY2spO1xufTtcblxuZXhwb3J0cy5zZWFyY2hOdW1iZXJzID0gZnVuY3Rpb24oY291bnRyeUNvZGUsIHBhdHRlcm4sIGNhbGxiYWNrKSB7XG4gIGlmICghY291bnRyeUNvZGUgfHwgY291bnRyeUNvZGUubGVuZ3RoICE9PSAyKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuY291bnRyeWNvZGUpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2VhcmNoRW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9udW1iZXIvc2VhcmNoXCIpO1xuICAgIHNlYXJjaEVuZHBvaW50LnBhdGggKz0gXCI/Y291bnRyeT1cIiArIGNvdW50cnlDb2RlO1xuICAgIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjYWxsYmFjayA9IHBhdHRlcm47XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgc2VhcmNoRW5kcG9pbnQucGF0aCA9IHNlYXJjaEVuZHBvaW50LnBhdGggKyBcIiZcIjtcbiAgICAgIGZvciAodmFyIGFyZyBpbiBwYXR0ZXJuKSB7XG4gICAgICAgIHNlYXJjaEVuZHBvaW50LnBhdGggPVxuICAgICAgICAgIHNlYXJjaEVuZHBvaW50LnBhdGggKyBhcmcgKyBcIj1cIiArIHBhdHRlcm5bYXJnXSArIFwiJlwiO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZWFyY2hFbmRwb2ludC5wYXRoID0gc2VhcmNoRW5kcG9pbnQucGF0aCArIFwiJnBhdHRlcm49XCIgKyBwYXR0ZXJuO1xuICAgIH1cbiAgICBzZW5kUmVxdWVzdChzZWFyY2hFbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmJ1eU51bWJlciA9IGZ1bmN0aW9uKGNvdW50cnlDb2RlLCBtc2lzZG4sIGNhbGxiYWNrKSB7XG4gIGlmICghY291bnRyeUNvZGUgfHwgY291bnRyeUNvZGUubGVuZ3RoICE9IDIpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5jb3VudHJ5Y29kZSkpO1xuICB9IGVsc2UgaWYgKCFtc2lzZG4pIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tc2lzZG4pKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgYnV5RW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9udW1iZXIvYnV5XCIpO1xuICAgIGJ1eUVuZHBvaW50LnBhdGggKz0gXCI/Y291bnRyeT1cIiArIGNvdW50cnlDb2RlICsgXCImbXNpc2RuPVwiICsgbXNpc2RuO1xuICAgIHNlbmRSZXF1ZXN0KGJ1eUVuZHBvaW50LCBcIlBPU1RcIiwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmNhbmNlbE51bWJlciA9IGZ1bmN0aW9uKGNvdW50cnlDb2RlLCBtc2lzZG4sIGNhbGxiYWNrKSB7XG4gIGlmICghY291bnRyeUNvZGUgfHwgY291bnRyeUNvZGUubGVuZ3RoICE9PSAyKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuY291bnRyeWNvZGUpKTtcbiAgfSBlbHNlIGlmICghbXNpc2RuKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNpc2RuKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNhbmNlbEVuZHBvaW50ID0gZ2V0RW5kcG9pbnQoXCIvbnVtYmVyL2NhbmNlbFwiKTtcbiAgICBjYW5jZWxFbmRwb2ludC5wYXRoICs9IFwiP2NvdW50cnk9XCIgKyBjb3VudHJ5Q29kZSArIFwiJm1zaXNkbj1cIiArIG1zaXNkbjtcbiAgICBzZW5kUmVxdWVzdChjYW5jZWxFbmRwb2ludCwgXCJQT1NUXCIsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5jYW5jZWxOdW1iZXIgPSBmdW5jdGlvbihjb3VudHJ5Q29kZSwgbXNpc2RuLCBjYWxsYmFjaykge1xuICBpZiAoIWNvdW50cnlDb2RlIHx8IGNvdW50cnlDb2RlLmxlbmd0aCAhPT0gMikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmNvdW50cnljb2RlKSk7XG4gIH0gZWxzZSBpZiAoIW1zaXNkbikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zaXNkbikpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjYW5jZWxFbmRwb2ludCA9IGdldEVuZHBvaW50KFwiL251bWJlci9jYW5jZWxcIik7XG4gICAgY2FuY2VsRW5kcG9pbnQucGF0aCArPSBcIj9jb3VudHJ5PVwiICsgY291bnRyeUNvZGUgKyBcIiZtc2lzZG49XCIgKyBtc2lzZG47XG4gICAgc2VuZFJlcXVlc3QoY2FuY2VsRW5kcG9pbnQsIFwiUE9TVFwiLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMudXBkYXRlTnVtYmVyID0gZnVuY3Rpb24oY291bnRyeUNvZGUsIG1zaXNkbiwgcGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAoIWNvdW50cnlDb2RlIHx8IGNvdW50cnlDb2RlLmxlbmd0aCAhPT0gMikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmNvdW50cnljb2RlKSk7XG4gIH0gZWxzZSBpZiAoIW1zaXNkbikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zaXNkbikpO1xuICB9IGVsc2Uge1xuICAgIHZhciB1cGRhdGVFbmRwb2ludCA9IGdldEVuZHBvaW50KFwiL251bWJlci91cGRhdGVcIik7XG4gICAgdXBkYXRlRW5kcG9pbnQucGF0aCArPSBcIj9jb3VudHJ5PVwiICsgY291bnRyeUNvZGUgKyBcIiZtc2lzZG49XCIgKyBtc2lzZG47XG4gICAgdXBkYXRlRW5kcG9pbnQucGF0aCA9IHVwZGF0ZUVuZHBvaW50LnBhdGggKyBcIiZcIjtcbiAgICBmb3IgKHZhciBhcmcgaW4gcGFyYW1zKSB7XG4gICAgICB1cGRhdGVFbmRwb2ludC5wYXRoID1cbiAgICAgICAgdXBkYXRlRW5kcG9pbnQucGF0aCArIGFyZyArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1thcmddKSArIFwiJlwiO1xuICAgIH1cbiAgICBzZW5kUmVxdWVzdCh1cGRhdGVFbmRwb2ludCwgXCJQT1NUXCIsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uKG5ld1NlY3JldCwgY2FsbGJhY2spIHtcbiAgdmFyIHNldHRpbmdzRW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9hY2NvdW50L3NldHRpbmdzXCIpO1xuICBzZXR0aW5nc0VuZHBvaW50LnBhdGggKz0gXCI/bmV3U2VjcmV0PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KG5ld1NlY3JldCk7XG4gIHNlbmRSZXF1ZXN0KHNldHRpbmdzRW5kcG9pbnQsIFwiUE9TVFwiLCBjYWxsYmFjayk7XG59O1xuXG5leHBvcnRzLmNoYW5nZU1vQ2FsbGJhY2tVcmwgPSBmdW5jdGlvbihuZXdVcmwsIGNhbGxiYWNrKSB7XG4gIHZhciBzZXR0aW5nc0VuZHBvaW50ID0gZ2V0RW5kcG9pbnQoXCIvYWNjb3VudC9zZXR0aW5nc1wiKTtcbiAgc2V0dGluZ3NFbmRwb2ludC5wYXRoICs9IFwiP21vQ2FsbEJhY2tVcmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQobmV3VXJsKTtcbiAgc2VuZFJlcXVlc3Qoc2V0dGluZ3NFbmRwb2ludCwgXCJQT1NUXCIsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydHMuY2hhbmdlRHJDYWxsYmFja1VybCA9IGZ1bmN0aW9uKG5ld1VybCwgY2FsbGJhY2spIHtcbiAgdmFyIHNldHRpbmdzRW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9hY2NvdW50L3NldHRpbmdzXCIpO1xuICBzZXR0aW5nc0VuZHBvaW50LnBhdGggKz0gXCI/ZHJDYWxsQmFja1VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChuZXdVcmwpO1xuICBzZW5kUmVxdWVzdChzZXR0aW5nc0VuZHBvaW50LCBcIlBPU1RcIiwgY2FsbGJhY2spO1xufTtcblxuZXhwb3J0cy52ZXJpZnlOdW1iZXIgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgaWYgKCFpbnB1dFBhcmFtcy5udW1iZXIgfHwgIWlucHV0UGFyYW1zLmJyYW5kKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudmVyaWZ5VmFsaWRhdGlvbikpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2RW5kcG9pbnQgPSBjbG9uZSh2ZXJpZnlFbmRwb2ludCk7XG4gICAgdkVuZHBvaW50LnBhdGggKz0gXCI/XCIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkoaW5wdXRQYXJhbXMpO1xuICAgIHNlbmRSZXF1ZXN0KHZFbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmNoZWNrVmVyaWZ5UmVxdWVzdCA9IGZ1bmN0aW9uKGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAoIWlucHV0UGFyYW1zLnJlcXVlc3RfaWQgfHwgIWlucHV0UGFyYW1zLmNvZGUpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5jaGVja1ZlcmlmeVZhbGlkYXRpb24pKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdkVuZHBvaW50ID0gY2xvbmUoY2hlY2tWZXJpZnlFbmRwb2ludCk7XG4gICAgdkVuZHBvaW50LnBhdGggKz0gXCI/XCIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkoaW5wdXRQYXJhbXMpO1xuICAgIHNlbmRSZXF1ZXN0KHZFbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmNvbnRyb2xWZXJpZnlSZXF1ZXN0ID0gZnVuY3Rpb24oaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSB7XG4gIGlmICghaW5wdXRQYXJhbXMucmVxdWVzdF9pZCB8fCAhaW5wdXRQYXJhbXMuY21kKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuY29udHJvbFZlcmlmeVZhbGlkYXRpb24pKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdkVuZHBvaW50ID0gY2xvbmUoY29udHJvbFZlcmlmeUVuZHBvaW50KTtcbiAgICB2RW5kcG9pbnQucGF0aCArPSBcIj9cIiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShpbnB1dFBhcmFtcyk7XG4gICAgc2VuZFJlcXVlc3QodkVuZHBvaW50LCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuc2VhcmNoVmVyaWZ5UmVxdWVzdCA9IGZ1bmN0aW9uKHJlcXVlc3RJZHMsIGNhbGxiYWNrKSB7XG4gIHZhciByZXF1ZXN0SWRQYXJhbSA9IHt9O1xuICBpZiAoIXJlcXVlc3RJZHMpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5zZWFyY2hWZXJpZnlWYWxpZGF0aW9uKSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVxdWVzdElkcykpIHtcbiAgICAgIGlmIChyZXF1ZXN0SWRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXF1ZXN0SWRQYXJhbS5yZXF1ZXN0X2lkID0gcmVxdWVzdElkcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcXVlc3RJZFBhcmFtLnJlcXVlc3RfaWRzID0gcmVxdWVzdElkcztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVxdWVzdElkUGFyYW0ucmVxdWVzdF9pZCA9IHJlcXVlc3RJZHM7XG4gICAgfVxuICAgIHZhciB2RW5kcG9pbnQgPSBjbG9uZShzZWFyY2hWZXJpZnlFbmRwb2ludCk7XG4gICAgdkVuZHBvaW50LnBhdGggKz0gXCI/XCIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkocmVxdWVzdElkUGFyYW0pO1xuICAgIHNlbmRSZXF1ZXN0KHZFbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLm51bWJlckluc2lnaHQgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgbnVtYmVySW5zaWdodEFzeW5jKGlucHV0UGFyYW1zLCBjYWxsYmFjayk7XG59O1xuXG5leHBvcnRzLm51bWJlckluc2lnaHRCYXNpYyA9IGZ1bmN0aW9uKGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBudW1iZXJJbnNpZ2h0Q29tbW9uKG5pQmFzaWNFbmRwb2ludCwgaW5wdXRQYXJhbXMsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydHMubnVtYmVySW5zaWdodFN0YW5kYXJkID0gZnVuY3Rpb24oaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSB7XG4gIG51bWJlckluc2lnaHRDb21tb24obmlTdGFuZGFyZEVuZHBvaW50LCBpbnB1dFBhcmFtcywgY2FsbGJhY2spO1xufTtcblxuZXhwb3J0cy5udW1iZXJJbnNpZ2h0QWR2YW5jZWQgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgbnVtYmVySW5zaWdodENvbW1vbihuaUFkdmFuY2VkRW5kcG9pbnQsIGlucHV0UGFyYW1zLCBjYWxsYmFjayk7XG59O1xuXG5leHBvcnRzLm51bWJlckluc2lnaHRBZHZhbmNlZEFzeW5jID0gZnVuY3Rpb24oaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSB7XG4gIG51bWJlckluc2lnaHRBc3luYyhpbnB1dFBhcmFtcywgY2FsbGJhY2spO1xufTtcblxuZnVuY3Rpb24gbnVtYmVySW5zaWdodEFzeW5jKGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAoIWlucHV0UGFyYW1zLm51bWJlciB8fCAhaW5wdXRQYXJhbXMuY2FsbGJhY2spIHtcbiAgICBzZW5kRXJyb3IoXG4gICAgICBjYWxsYmFjayxcbiAgICAgIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5udW1iZXJJbnNpZ2h0QWR2YW5jZWRWYWxpZGF0aW9uKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIG5FbmRwb2ludCA9IGNsb25lKG5pRW5kcG9pbnQpO1xuICAgIG5FbmRwb2ludC5wYXRoICs9IFwiP1wiICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KGlucHV0UGFyYW1zKTtcbiAgICBzZW5kUmVxdWVzdChuRW5kcG9pbnQsIGNhbGxiYWNrKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBudW1iZXJJbnNpZ2h0Q29tbW9uKGVuZHBvaW50LCBpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgaWYgKHZhbGlkYXRlTnVtYmVyKGlucHV0UGFyYW1zLCBjYWxsYmFjaykpIHtcbiAgICB2YXIgaW5wdXRPYmo7XG4gICAgaWYgKHR5cGVvZiBpbnB1dFBhcmFtcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgaW5wdXRPYmogPSB7IG51bWJlcjogaW5wdXRQYXJhbXMgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5wdXRPYmogPSBpbnB1dFBhcmFtcztcbiAgICB9XG4gICAgdmFyIG5FbmRwb2ludCA9IGNsb25lKGVuZHBvaW50KTtcbiAgICBuRW5kcG9pbnQucGF0aCArPSBcIj9cIiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShpbnB1dE9iaik7XG4gICAgc2VuZFJlcXVlc3QobkVuZHBvaW50LCBjYWxsYmFjayk7XG4gIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlTnVtYmVyKGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIGlucHV0UGFyYW1zID09PSBcIm9iamVjdFwiICYmICFpbnB1dFBhcmFtcy5udW1iZXIpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5udW1iZXJJbnNpZ2h0VmFsaWRhdGlvbikpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIGlmIChcbiAgICB0eXBlb2YgaW5wdXRQYXJhbXMgPT09IFwib2JqZWN0XCIgJiZcbiAgICAhbnVtYmVyUGF0dGVybi50ZXN0KGlucHV0UGFyYW1zLm51bWJlcilcbiAgKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubnVtYmVySW5zaWdodFBhdHRlcm5GYWlsdXJlKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2UgaWYgKFxuICAgIHR5cGVvZiBpbnB1dFBhcmFtcyAhPT0gXCJvYmplY3RcIiAmJlxuICAgICghaW5wdXRQYXJhbXMgfHwgIW51bWJlclBhdHRlcm4udGVzdChpbnB1dFBhcmFtcykpXG4gICkge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm51bWJlckluc2lnaHRQYXR0ZXJuRmFpbHVyZSkpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gc2VuZFZvaWNlTWVzc2FnZSh2b2ljZUVuZHBvaW50LCBkYXRhLCBjYWxsYmFjaykge1xuICBpZiAoIWRhdGEudG8pIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy50bykpO1xuICB9IGVsc2Uge1xuICAgIHZhciBlbmRwb2ludCA9IGNsb25lKHZvaWNlRW5kcG9pbnQpO1xuICAgIGVuZHBvaW50LnBhdGggKz0gXCI/XCIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkoZGF0YSk7XG4gICAgX29wdGlvbnMubG9nZ2VyLmluZm8oXG4gICAgICBcInNlbmRpbmcgVFRTIG1lc3NhZ2UgdG8gXCIgKyBkYXRhLnRvICsgXCIgd2l0aCBtZXNzYWdlIFwiICsgZGF0YS50ZXh0XG4gICAgKTtcbiAgICBzZW5kUmVxdWVzdChlbmRwb2ludCwgXCJQT1NUXCIsIGZ1bmN0aW9uKGVyciwgYXBpUmVzcG9uc2UpIHtcbiAgICAgIGlmICghZXJyICYmIGFwaVJlc3BvbnNlLnN0YXR1cyAmJiBhcGlSZXNwb25zZS5zdGF0dXMgPiAwKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKGFwaVJlc3BvbnNlW1wiZXJyb3ItdGV4dFwiXSksIGFwaVJlc3BvbnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBhcGlSZXNwb25zZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0cy5zZW5kVFRTTWVzc2FnZSA9IGZ1bmN0aW9uKHJlY2lwaWVudCwgbWVzc2FnZSwgb3B0cywgY2FsbGJhY2spIHtcbiAgaWYgKCFtZXNzYWdlKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNnKSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuICAgIG9wdHNbXCJ0b1wiXSA9IHJlY2lwaWVudDtcbiAgICBvcHRzW1widGV4dFwiXSA9IG1lc3NhZ2U7XG4gICAgc2VuZFZvaWNlTWVzc2FnZSh0dHNFbmRwb2ludCwgb3B0cywgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLnNlbmRUVFNQcm9tcHRXaXRoQ2FwdHVyZSA9IGZ1bmN0aW9uKFxuICByZWNpcGllbnQsXG4gIG1lc3NhZ2UsXG4gIG1heERpZ2l0cyxcbiAgYnllVGV4dCxcbiAgb3B0cyxcbiAgY2FsbGJhY2tcbikge1xuICBpZiAoIW1lc3NhZ2UpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tc2cpKTtcbiAgfSBlbHNlIGlmICghbWF4RGlnaXRzIHx8IGlzTmFOKG1heERpZ2l0cykgfHwgbWF4RGlnaXRzLmxlbmd0aCA+IDE2KSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubWF4RGlnaXRzKSk7XG4gIH0gZWxzZSBpZiAoIWJ5ZVRleHQpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5ieWVUZXh0KSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuICAgIG9wdHNbXCJ0b1wiXSA9IHJlY2lwaWVudDtcbiAgICBvcHRzW1widGV4dFwiXSA9IG1lc3NhZ2U7XG4gICAgb3B0c1tcIm1heF9kaWdpdHNcIl0gPSBtYXhEaWdpdHM7XG4gICAgb3B0c1tcImJ5ZV90ZXh0XCJdID0gYnllVGV4dDtcbiAgICBzZW5kVm9pY2VNZXNzYWdlKHR0c1Byb21wdEVuZHBvaW50LCBvcHRzLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuc2VuZFRUU1Byb21wdFdpdGhDb25maXJtID0gZnVuY3Rpb24oXG4gIHJlY2lwaWVudCxcbiAgbWVzc2FnZSxcbiAgbWF4RGlnaXRzLFxuICBwaW5Db2RlLFxuICBieWVUZXh0LFxuICBmYWlsZWRUZXh0LFxuICBvcHRzLFxuICBjYWxsYmFja1xuKSB7XG4gIGlmICghbWVzc2FnZSkge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zZykpO1xuICB9IGVsc2UgaWYgKCFtYXhEaWdpdHMgfHwgaXNOYU4obWF4RGlnaXRzKSB8fCBtYXhEaWdpdHMubGVuZ3RoID4gMTYpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tYXhEaWdpdHMpKTtcbiAgfSBlbHNlIGlmICghcGluQ29kZSB8fCBwaW5Db2RlLmxlbmd0aCAhPT0gbWF4RGlnaXRzKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMucGluQ29kZSkpO1xuICB9IGVsc2UgaWYgKCFieWVUZXh0KSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYnllVGV4dCkpO1xuICB9IGVsc2UgaWYgKCFmYWlsZWRUZXh0KSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuZmFpbGVkVGV4dCkpO1xuICB9IGVsc2Uge1xuICAgIGlmICghb3B0cykge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cbiAgICBvcHRzW1widG9cIl0gPSByZWNpcGllbnQ7XG4gICAgb3B0c1tcInRleHRcIl0gPSBtZXNzYWdlO1xuICAgIG9wdHNbXCJtYXhfZGlnaXRzXCJdID0gbWF4RGlnaXRzO1xuICAgIG9wdHNbXCJwaW5fY29kZVwiXSA9IHBpbkNvZGU7XG4gICAgb3B0c1tcImJ5ZV90ZXh0XCJdID0gYnllVGV4dDtcbiAgICBvcHRzW1wiZmFpbGVkX3RleHRcIl0gPSBmYWlsZWRUZXh0O1xuICAgIHNlbmRWb2ljZU1lc3NhZ2UodHRzUHJvbXB0RW5kcG9pbnQsIG9wdHMsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5jYWxsID0gZnVuY3Rpb24ocmVjaXBpZW50LCBhbnN3ZXJVcmwsIG9wdHMsIGNhbGxiYWNrKSB7XG4gIGlmICghYW5zd2VyVXJsKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYW5zd2VyVXJsKSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuICAgIG9wdHNbXCJ0b1wiXSA9IHJlY2lwaWVudDtcbiAgICBvcHRzW1wiYW5zd2VyX3VybFwiXSA9IGFuc3dlclVybDtcbiAgICBzZW5kVm9pY2VNZXNzYWdlKGNhbGxFbmRwb2ludCwgb3B0cywgY2FsbGJhY2spO1xuICB9XG59O1xuXG5mdW5jdGlvbiBzZW5kRXJyb3IoY2FsbGJhY2ssIGVyciwgcmV0dXJuRGF0YSkge1xuICAvLyBUaHJvdyB0aGUgZXJyb3IgaW4gY2FzZSBpZiB0aGVyZSBpcyBubyBjYWxsYmFjayBwYXNzZWRcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2soZXJyLCByZXR1cm5EYXRhKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn1cblxuZXhwb3J0cy5nZXRXaXRoUXVlcnkgPSBmdW5jdGlvbihwYXRoLCBxdWVyeSwgY3JlZHMsIG9wdHMsIGNhbGxiYWNrKSB7XG4gIGlmICghcXVlcnkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1wicXVlcnlcIiBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlcicpO1xuICB9XG5cbiAgdmFyIHBhdGhFeHQgPSBcIlwiO1xuICBpZiAodHlwZW9mIHF1ZXJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgLy8gc2luZ2xlIGNhbGwgSWRcbiAgICBwYXRoRXh0ID0gYC8ke3F1ZXJ5fWA7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHF1ZXJ5ID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPiAwKSB7XG4gICAgLy8gZmlsdGVyXG4gICAgcGF0aEV4dCA9IGA/JHtxdWVyeXN0cmluZy5zdHJpbmdpZnkocXVlcnkpfWA7XG4gIH1cblxuICB2YXIgY29uZmlnID0ge1xuICAgIGhvc3Q6IFwiYXBpLm5leG1vLmNvbVwiLFxuICAgIHBhdGg6IGAke3BhdGh9JHtwYXRoRXh0fWAsXG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2NyZWRzLmdlbmVyYXRlSnd0KCl9YFxuICAgIH1cbiAgfTtcbiAgb3B0cy5odHRwQ2xpZW50LnJlcXVlc3QoY29uZmlnLCBjYWxsYmFjayk7XG59O1xuXG5leHBvcnRzLnNldEhvc3QgPSBmdW5jdGlvbihhSG9zdCkge1xuICBtc2dwYXRoLmhvc3QgPSBhSG9zdDtcbiAgc2hvcnRjb2RlUGF0aC5ob3N0ID0gYUhvc3Q7XG4gIHR0c0VuZHBvaW50Lmhvc3QgPSBhSG9zdDtcbiAgdHRzUHJvbXB0RW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICBjYWxsRW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICB2ZXJpZnlFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gIGNoZWNrVmVyaWZ5RW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICBjb250cm9sVmVyaWZ5RW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICBzZWFyY2hWZXJpZnlFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gIG5pRW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICBuaUJhc2ljRW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICBuaVN0YW5kYXJkRW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xufTtcbiJdfQ==